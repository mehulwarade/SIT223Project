<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>SARMS - Student (Unit Access)</title>
    <link rel="shortcut icon" href="./images/Title.jpg" type="image/x-icon" />

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CVarela+Round" rel="stylesheet">

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

	<!-- Owl Carousel -->
	<link type="text/css" rel="stylesheet" href="css/owl.carousel.css" />
	<link type="text/css" rel="stylesheet" href="css/owl.theme.default.css" />

	<!-- Magnific Popup -->
	<link type="text/css" rel="stylesheet" href="css/magnific-popup.css" />

	<!-- Font Awesome Icon -->
	<link rel="stylesheet" href="css/font-awesome.min.css">

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="css/style.css" />
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">

</head>

<body>
		<!-- About -->
	<div id="about" class="section md-padding">

			<!-- Container -->
			<div class="container">
	
				<!-- Row -->
				<div class="row">
	
					<!-- Section header -->
					<div class="section-header text-center">
							<h2 class="title">Welcome <d id="nameshow"></d></h2>
							<h4 class="title">(ID: <d id="idshow"></d>)</h4>
						<p class="black-text">This is your own personalized space and can be used for various different functions.
							</p>
							<p class="black-text">Please choose one of the following.
								</p>
					</div>
					<!-- /Section header -->
	
					<!-- about -->
					<a href="./student_unit_access.html">
							<div class="col-md-4">							
								<div class="about">
									<i class="fa fa-book"></i>
									<h3>Unit Access</h3>
									<p>Check all the units you are enrolled in and also get the performance and attendence data for yourself.</p>
									<br>							
								</div>
							</div>
						</a>
					<!-- /about -->
	
					<!-- about -->
					<a href="./student_report.html">
							<div class="col-md-4">							
								<div class="about">
									<i class="fa fa-line-chart"></i>
									<h3>Generate Reports</h3>
									<p>Create visual representation of a your performance and attendence data.</p><br><br>							
								</div>
							</div>
						</a>
					<!-- /about -->
		
					<!-- about -->
					<a href="../../homepage.html">
							<div class="col-md-4">							
								<div class="about">
									<i class="fa fa-sign-out"></i>
									<h3>Sign Out</h3>
									<p>Return to the login page.</p><br><br>
									<br>						
								</div>
							</div>
						</a>
					<!-- /about -->
	
				</div>
				<!-- /Row -->
	
			</div>
			<!-- /Container -->	
		
				<div class="limiter">
						<div class="container-table100">												
							<div class="wrap-table100">
									<div class="section-header text-center">
											<h2 class="title">Following are the units you are currently allocated to and their information:</h2>				
									</div>	
								<div class="table100 ver1 m-b-50">									
									<div class="table100-head">
										
										<table>
											<thead>
												<tr class="row100 head">										
													<th class="cell100 column1">Unit Code</th>
													<th class="cell100 column2">Attendence (%)</th>
													<th class="cell100 column3">Performance (%)</th>										
												</tr>								
											</thead>
										</table>
									</div>	
											<div class="table100-body js-pscroll">
													<table>
														<tbody id="studentreportlist">
																<tr class="row100 body">
																		<td class="cell100 column1"></td>
																		<td class="cell100 column2"></td>
																		<td class="cell100 column3"></td>																		
																		</tr>															
																<tr class="row100 body">
																		<td class="cell100 column1"></td>
																		<td class="cell100 column2"></td>
																		<td class="cell100 column3"></td>																		
																</tr>			
																<tr class="row100 body">
																		<td class="cell100 column1"></td>
																		<td class="cell100 column2"></td>
																		<td class="cell100 column3"></td>																		
																		</tr>		
																<tr class="row100 body">
																		<td class="cell100 column1"></td>
																		<td class="cell100 column2"></td>
																		<td class="cell100 column3"></td>																		
																</tr>																		
														</tbody>
													</table>
											</div>							
								</div>
								<div class="section-header text-left">
									
										SIT 123 : Introduction to maths<br>
										SIT 124 : Applied Algebra and Mathematics <br>
										SIT 235 : Engineering Physics <br>
										SIT 312 : Psychology<br>
										SIT 222 : Computer Science <br>
										SIT 123 : Cyber Security for Beginners <br>
										SIT 144 : Agricultural History <br>
										SIT 232 : Global Warming and It’s History<br>
									
						</div>	
							</div>
						</div>
					</div>
			</div>
			<!-- /About -->
		
<!-- /About -->
	<div id="chartContainer" style="height: 500px; width: 800px">  </div>
	<br><br>	
		
	<!-- Footer -->
	<footer id="footer" class="sm-padding bg-dark">
			<!-- Container -->
			<div class="container">
				<!-- Row -->
				<div class="row">
					<div class="col-md-12">
						<!-- footer copyright -->
						<div class="footer-copyright">
							<p>Copyright © mjsx (2019). Designed by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
						</div>
						<!-- /footer copyright -->
					</div>
				</div>
				<!-- /Row -->
			</div>
			<!-- /Container -->
		</footer>
		<!-- /Footer -->

	<!-- Preloader -->
	<div id="preloader">
		<div class="preloader">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
	</div>
	<!-- /Preloader -->

	<!-- jQuery Plugins -->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/owl.carousel.min.js"></script>
	<script type="text/javascript" src="js/jquery.magnific-popup.js"></script>
	<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script src="../../app.js"></script>
</body>

</html>
<script>
		var i;
		var j=0;
		const id = localStorage.getItem('ID');
		const curruser = localStorage.getItem('user');
		const unitcode = ['sit123', 'sit124', 'sit235', 'sit312', 'sit222','sit211','sit144','sit232'];
		const unitcodecaps = ['SIT123', 'SIT124', 'SIT235', 'SIT312', 'SIT222','SIT211','SIT144','SIT232'];

		document.getElementById('idshow').innerHTML = `${id}`;
		document.getElementById('nameshow').innerHTML = `${curruser}`;		
		var final = [];
		var unitlist = [];
		var attendencelist = [];
		var performancelist =[];
		$.get(`${API_URL}/userdata`).then(response => {			
					response.forEach((user) => {						
						if(user.ID == id){
							for(i = 0; i <=7; i++){								
								if(unitcodecaps[i] == user.Unit1 || unitcodecaps[i] == user.Unit2 ||unitcodecaps[i] == user.Unit3 ||unitcodecaps[i] == user.Unit4){								
									unitlist[j] =  unitcodecaps[i] ;								
									j++										
								}
							}
							j=0;
							for(i=0;i<=3;i++){
								if(user.Unit1 == unitlist[i]){								
									attendencelist[j] = user.attunit1;
									performancelist[j] = user.graunit1;									
								}
								if(user.Unit2 == unitlist[i]){
									attendencelist[j] = user.attunit2;
									performancelist[j] = user.graunit2;	}
								if(user.Unit3 == unitlist[i]){
									attendencelist[j] = user.attunit3;
									performancelist[j] = user.graunit3;	}
								if(user.Unit4 == unitlist[i]){
									attendencelist[j] = user.attunit4;
									performancelist[j] = user.graunit4;	}
								j++
							}
							for(i=0;i<=3;i++){							
									console.log(unitlist[i] +" "+ attendencelist[i] +" "+ performancelist[i]);
								}

							table = document.getElementById("studentreportlist");

							final = [[unitlist[0], attendencelist[0], performancelist[0]],
											[unitlist[1], attendencelist[1], performancelist[1]],
											[unitlist[2], attendencelist[2], performancelist[2]],
											[unitlist[3], attendencelist[3], performancelist[3]]]

											//console.log(final);

							for(i=0;i<=3;i++){
								for (j=0;j<=2;j++){
								table.rows[i].cells[j].innerHTML = final[i][j];
								}							
							}
							console.log(attendencelist);
			
							//Report generation code below
				var attendence = [
            { label: unitlist[0], y: parseInt(attendencelist[0])},
            { label: unitlist[1], y: parseInt(attendencelist[1])},
            { label: unitlist[2], y: parseInt(attendencelist[2])},                     
            { label: unitlist[3], y: parseInt(attendencelist[3])}];

        var performance = [
						{ label: unitlist[0], y: parseInt(performancelist[0])},
						{ label: unitlist[1], y: parseInt(performancelist[1])},
						{ label: unitlist[2], y: parseInt(performancelist[2])},                                 
						{ label: unitlist[3], y: parseInt(performancelist[3])},];
       
       
      
             var chart = new CanvasJS.Chart("chartContainer", { 
             theme:"light2",
             
           title:{               
             text: "Report"              
           },
           axisX:{
             gridColor: "lightblue" ,
             gridThickness: 1,
             title: "Unit Code"        
           },
           axisY:{        
             gridColor: "lightblue",
						 gridThickness: 1,
						 includeZero: false,
             title:"Percentage (%)",
             interlacedColor: "#F0F8FF" 
           },
           legend: {
							horizontalAlign: "right", // left, center ,right 
							verticalAlign: "top",  // top, center, bottom
        },
           data: [  //array of dataSeries     
           { //dataSeries - first quarter
        /*** Change type "column" to "bar", "area", "line" or "pie"***/        
            type: "line",
            showInLegend: true, 
            name: "series1",
            legendText: "Attendence",
            dataPoints: attendence
          },
          { //dataSeries - second quarter
     
           type: "line",
           showInLegend: true, 
            name: "series1",
            legendText: "Performance (Grades)",              
           dataPoints: performance
         }
         ]
       });
         chart.render();
       
     


						}						
					});
					
				})  
			
				   		
 
       
		
</script>


